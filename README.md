
# ng6LibWspace

## Creating an Angular 6 Workspace and Library

```js
ng new ng-lib-wspace
ng serve --open
ng serve ng6-lib-wspace --open
ng serve ng6-lib-sample --open

ng generate library ng6-rxjs-lib-demo --prefix=xlw
ng build --prod ng6-rxjs-lib-demo

```

### Using the Library in Our Application

```js
import { Ng6RxjsLibDemoModule } from 'ng6-rxjs-lib-demo';
```

import the module in the application using the library by name.
Add the `Ng6RxjsLibDemoModule` to the imports array.
when importing a library by name, the Angular CLI looks first in the `tsconfig.json` paths and then in `node_modules`.

### Expanding the Library

- Generate a new component in our library.

    ```bash
    ng generate component /Components/simple-table --project=ng6-rxjs-lib-demo
    ```

- Add the component to our library moduleâ€™s exports array in the `ng6-rxjs-lib-demo.module.ts`

- Add the component to our entry file `public_api.ts`.
- Rebuild our library after we make changes to it.

    ```bash
    ng build --prod ng6-rxjs-lib-demo
    ```
- Use the new component in our application.

add the element `<xlw-simple-table></xlw-simple-table>` as the last line of your `app.component.html` file

- run app with
    ```bash
    ng serve --open
    ```

### Build

```js
"scripts": {
  ...
    "build_lib": "ng build --prod ng6-rxjs-lib-demo",
  ...
},

npm run build_lib
```

After building our library, build application using: `ng build`

### package.json Files

- Root package.json

This is the main `package.json` file for our library workspace. We use this to list our dependencies for both the application and the library. Any package that is needed to run or build either the application or the project must be in here. When we use npm install during our development, this is the package.json where the new package will be added.

- Library project package.json

The library project `package.json` is in the `projects\ng6-rxjs-lib-demo` directory and tells ng-packagr what information goes into the distribution `package.json` that will be shipped with our library.

- Library distribution package.json

The library distribution package.json is generated by ng-packagr in the `dist\ng6-rxjs-lib-demo` directory when we build our library. It is the package.json that gets released with our library.
Developers who want to use our library will use npm install which will look at this `package.json` to determine what other dependencies need to be installed.
Since this distribution `package.json` is generated for us by ng-packagr, you should NOT edit it directly. To change the contents, update the project package.json in the `projects\ng6-rxjs-lib-demo` folder. ng-packagr looks at that one as uses it as a basis to generate the distribution package.json.

REMEMBER: Never directly modify the library distribution package.json.

## Packaging Our Library

Packaging our library means taking the generated distribution files and creating a single tgz file that we can share either manually or on npm.

Create a script in root package.json to package our library using npm pack.

```js
"scripts": {
  ...
  "npm_pack": "cd dist/ng6-rxjs-lib-demo && npm pack",
  ...
},


To package our library we can now use: `npm run npm_pack`

ALWAYS: Use npm pack to create the tgz file.

Make sure you have built and packaged your library using:`npm run package`

### Using the Library in a Separate Application

```js

npm install ../ng6-rxjs-lib-demo/dist/ng6-rxjs-lib-demo/ng6-rxjs-lib-demo-0.0.1.tgz

```

## Publish Library

- build library `npm run build_lib`
- copy dist to publish repository folder `npm run dist_xcopy` which it does the following
`Xcopy  /S /I /E /Y dist\\ng6-rxjs-lib-demo  ..\\ng6-lib-publish`
https://www.windows-commandline.com/xcopy-command-syntax-examples/
- commit and push publish to github and release it
- All abover steps have been combined with one command: `npm run build_lib_dist_publish`

## Install by other standalone app
`npm install git://github.com/rollandxyz/ng6-lib-publish.git --Save`


### Best practices

- ALWAYS: Create your workspace using the name of your library-app. Then rename it to the name of your library.
- ALWAYS: Use a prefix when generating a library. ng-packagr dependency in package.json
- ALWAYS: Use the `--prod` flag when building your library.
- Using the prod flag will make sure that we catch Angular Ahead-of-Time (AOT) errors early while they are still easy to find and fix.
- ALWAYS: In your test application import using your library by name and NOT the individual files.

FOR COMPONENTS:

- Using export makes the element visible
- Adding it to the entry file makes the class visible.

### How to rename workspace

```js

ng new example-ng6-lib-app
rename example-ng6-lib-app example-ng6-lib
cd example-ng6-lib
ng serve

```

- ?more advanced concepts such as working with assets, dependencies, considerations for services, approaches to entry files, etc.

- `https://blog.angularindepth.com/angular-and-internet-explorer-5e59bb6fb4e9`
- Support IE: `https://blog.angularindepth.com/angular-and-internet-explorer-5e59bb6fb4e9`
- `https://github.com/angular/angular-cli/wiki/serve`
